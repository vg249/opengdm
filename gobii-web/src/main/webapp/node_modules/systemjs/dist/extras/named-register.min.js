!function(t){const e=t.System;o(e);const r=e.constructor.prototype,n=e.constructor,s=function(){n.call(this),o(this)};let i;function o(t){t.registerRegistry=Object.create(null)}s.prototype=r,e.constructor=s;const c=r.import;r.import=function(){return i=null,c.apply(this,arguments)};const l=r.register;r.register=function(t,e,r){if("string"!=typeof t)return l.apply(this,arguments);const n=[e,r];return this.registerRegistry[t]=n,i||(i=n),l.apply(this,arguments)};const u=r.resolve;r.resolve=function(t,e){try{return u.call(this,t,e)}catch(e){if(t in this.registerRegistry)return t;throw e}};const g=r.instantiate;r.instantiate=function(t,e){return this.registerRegistry[t]||g.call(this,t,e)};const f=r.getRegister;r.getRegister=function(){const t=f.call(this),e=i||t;return i=null,e}}("undefined"!=typeof self?self:global);